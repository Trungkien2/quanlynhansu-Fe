import{r as i,o as w,x as y,j as e}from"./index-CbTo-eTW.js";import{a as E}from"./index.es-CCXWf--J.js";import{u as N,C as n}from"./index.esm-CU71HtH0.js";import{g as S}from"./departmentApi-WFj6Ri5T.js";import{a as _,e as v,c as D}from"./employeeApi-B7RTnM0P.js";import{C as L}from"./CCardGroup-HDnlwME6.js";import{C as F,a as O}from"./CCardBody-BEpxqQHd.js";import{C as P}from"./CForm-DnLZvK5b.js";import{C as m}from"./CInputGroup-C98M1vGL.js";import{C as l}from"./CFormInput-Cg9AIggH.js";import{C as V}from"./CFormSelect-Z1HVDSoU.js";import{C as B,a as G}from"./CRow-M-J25O2z.js";import"./axiosClient-BIXGjfOH.js";import"./index-BWBikUGW.js";import"./CFormControlWrapper-Cn2KsSi7.js";import"./CFormControlValidation-BBxMmaAk.js";import"./CFormLabel-DiFyRKSA.js";const ee=()=>{const[p,d]=i.useState([]),c=w();let{id:t}=y();const{control:o,handleSubmit:u,setValue:h,formState:{errors:I}}=N({mode:"onSubmit",reValidateMode:"onSubmit",defaultValues:{email:"",password:"",phone:"",department_id:"",name:""}}),x=async()=>{var r;try{const a=await S({fields:["name","id"]});console.log("ðŸš€ ~ getListDepartment ~ res:",a),d((r=a==null?void 0:a.rows)==null?void 0:r.map(s=>({value:s==null?void 0:s.id,label:s==null?void 0:s.name})))}catch(a){alert(a.response.data.message)}},C=async r=>{try{const a=await _(r,{fields:["$all"]});console.log("ðŸš€ ~ getOne ~ res:",a);const s={email:a.email,password:a.password,phone:a.phone,department_id:a.department_id,name:a.name};Object.entries(s).forEach(([g,b])=>{h(g,b)})}catch(a){alert(a.response.data.message)}};i.useEffect(()=>{t&&C(t)},[t]),i.useEffect(()=>{x()},[]);function j(r){}async function f(r){try{let a;const s={name:r.name,department_id:r.department_id,password:r.password,phone:r.phone,email:r.email};t?a=await v(t,s):a=await D(s),c(-1)}catch(a){alert(a.response.data.message)}}return e.jsxs("div",{children:[" ",e.jsx(L,{children:e.jsx(F,{className:"p-4",children:e.jsx(O,{children:e.jsxs(P,{onSubmit:u(f,j),children:[e.jsx("h1",{children:"Create"}),e.jsx(m,{className:"mb-3",children:e.jsx(n,{name:"name",control:o,render:({field:r})=>e.jsx(l,{placeholder:"User name",autoComplete:"username",...r})})}),e.jsx(m,{className:"mb-3",children:e.jsx(n,{name:"email",control:o,render:({field:r})=>e.jsx(l,{placeholder:"Email",autoComplete:"username",...r})})}),e.jsx(m,{className:"mb-4",children:e.jsx(n,{name:"password",control:o,render:({field:r})=>e.jsx(l,{type:"password",placeholder:"Password",autoComplete:"current-password",...r})})}),e.jsx(m,{className:"mb-4",children:e.jsx(n,{name:"phone",control:o,render:({field:r})=>e.jsx(l,{type:"text",placeholder:"Phone",...r})})}),e.jsx(m,{className:"mb-4",children:e.jsx(n,{name:"department_id",control:o,render:({field:r})=>e.jsx(V,{"aria-label":"Department",options:p,...r,onChange:a=>{r.onChange(a.target.value)}})})}),e.jsx(B,{children:e.jsx(G,{xs:6,children:e.jsx(E,{type:"submit",color:"primary",className:"px-4",children:t?"Edit":"Create"})})})]})})})})]})};export{ee as default};
